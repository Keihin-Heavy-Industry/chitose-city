<nav>
    <div id="nav-left-container">
        <a id="logo-container" class="no-a" href="/">
            <div id="logo">
                <div id="logo-bar"></div>
                <img src="{{site.baseurl}}/assets/images/logo.svg" alt="Line Maps">
            </div>
            <img src="{{site.baseurl}}/assets/images/byChitose.svg" alt="">
        </a>
        <div id="pc-nav-list" class="nav-list">
            <a class="nav-item" href="/">
                <span>首页</span>
                <span>HOME</span>
            </a>
            <a class="nav-item" href="/maps">
                <span>线路图</span>
                <span>MAPS</span>
            </a>
            <a class="nav-item" href="/news">
                <span>新闻</span>
                <span>NEWS</span>
            </a>
        </div>
    </div>
    <form action="https://www.bing.com/search" method="get" target="_blank" class="search-container" id="searchForm">
        <input type="text" name="q" class="search-input" id="searchBox" placeholder="">
        
        <button type="submit" class="search-button">搜索</button>
    </form>

    <button id="menu-button">
        <img src="{{site.baseurl}}/assets/icon/menu.svg" alt="MENU">
    </button>
</nav>

<div id="mobile-menu">
    <div id="mobile-nav-list" class="nav-list">
        <a class="nav-item" href="/">
            <span>首页</span>
            <span>HOME</span>
        </a>
        <a class="nav-item" href="/maps">
            <span>线路图</span>
            <span>MAPS</span>
        </a>
        <a class="nav-item" href="/news">
            <span>新闻</span>
            <span>NEWS</span>
        </a>
        <!-- <a class="nav-item">
            <span>搜索</span>
            <span>SEARCH</span>
        </a> -->
    </div>        
</div>

<script>
    // 在提交前，自动加上 site: 限制条件，但不修改搜索框本身的显示
    document.getElementById('searchForm').onsubmit = function(e) {
        e.preventDefault();
        var box = document.getElementById('searchBox');
        var originalValue = box.value;
        if (originalValue.trim() !== "") {
            // 构造包含site的搜索URL，搜索框本身值保持不变
            var searchUrl = "https://www.bing.com/search?q=" + encodeURIComponent(originalValue + " site:chitose.city");
            window.open(searchUrl, '_blank');
        }
        return false;
    };
    
    // 菜单按钮切换功能
    document.getElementById('menu-button').addEventListener('click', function() {
        var mobileMenu = document.getElementById('mobile-menu');
        var menuButton = document.getElementById('menu-button')
        var menuImg = menuButton.querySelector('img');
        mobileMenu.classList.toggle('active');
        menuButton.classList.toggle('active');
        
        // 根据active状态改变img的src
        if (menuButton.classList.contains('active')) {
            menuImg.src = '{{site.baseurl}}/assets/icon/menu-close.svg';
        } else {
            menuImg.src = '{{site.baseurl}}/assets/icon/menu.svg';
        }
    });
    
    // 监听窗口宽度变化，当菜单为active状态时取消
    window.addEventListener('resize', function() {
        var mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenu.classList.contains('active')) {
            mobileMenu.classList.remove('active');
        }
    });
</script>
