<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line Maps by Project Chitose / 由千岁计划绘制的线路图</title>

    <!-- 搜索引擎优化项目 -->    
    <meta name="description" content="">
    <meta name="keywords" content="">

    <link rel="stylesheet" href="/assets/css/global.css">
    <link rel="stylesheet" href="/assets/css/index.css">

    <link rel="icon" href="favicon.svg">
</head>
<body>
    <script>
        // 检查用户是否已完成 onboarding
        if (!localStorage.getItem('onboardingCompleted')) {
            // 如果当前不在 onboarding 页面，保存当前页面地址并跳转到 onboarding 页面
            if (!window.location.pathname.includes('onboarding')) {
                localStorage.setItem('intendedPage', window.location.pathname);
                window.location.href = '/onboarding';
            }
        }
    </script>
    <nav>
    <div id="nav-left-container">
        <a id="logo-container" class="no-a" href="/">
            <div id="logo">
                <div id="logo-bar"></div>
                <img src="/assets/images/logo.svg" alt="Line Maps">
            </div>
            <img src="/assets/images/byChitose.svg" alt="">
        </a>
        <div id="pc-nav-list" class="nav-list">
            <a class="nav-item" href="/">
                <span>首页</span>
                <span>HOME</span>
            </a>
            <a class="nav-item" href="/maps">
                <span>线路图</span>
                <span>MAPS</span>
            </a>
            <a class="nav-item" href="/news">
                <span>新闻</span>
                <span>NEWS</span>
            </a>
        </div>
    </div>
    <form action="https://www.bing.com/search" method="get" target="_blank" class="search-container" id="searchForm">
        <input type="text" name="q" class="search-input" id="searchBox" placeholder="">
        
        <button type="submit" class="search-button">搜索</button>
    </form>

    <button id="menu-button">
        <img src="/assets/icon/menu.svg" alt="MENU">
    </button>
</nav>

<div id="mobile-menu">
    <div id="mobile-nav-list" class="nav-list">
        <a class="nav-item" href="/">
            <span>首页</span>
            <span>HOME</span>
        </a>
        <a class="nav-item" href="/maps">
            <span>线路图</span>
            <span>MAPS</span>
        </a>
        <a class="nav-item" href="/news">
            <span>新闻</span>
            <span>NEWS</span>
        </a>
        <!-- <a class="nav-item">
            <span>搜索</span>
            <span>SEARCH</span>
        </a> -->
    </div>        
</div>

<script>
    // 在提交前，自动加上 site: 限制条件，但不修改搜索框本身的显示
    document.getElementById('searchForm').onsubmit = function(e) {
        e.preventDefault();
        var box = document.getElementById('searchBox');
        var originalValue = box.value;
        if (originalValue.trim() !== "") {
            // 构造包含site的搜索URL，搜索框本身值保持不变
            var searchUrl = "https://www.bing.com/search?q=" + encodeURIComponent(originalValue + " site:chitose.city");
            window.open(searchUrl, '_blank');
        }
        return false;
    };
    
    // 菜单按钮切换功能
    document.getElementById('menu-button').addEventListener('click', function() {
        var mobileMenu = document.getElementById('mobile-menu');
        var menuButton = document.getElementById('menu-button')
        var menuImg = menuButton.querySelector('img');
        mobileMenu.classList.toggle('active');
        menuButton.classList.toggle('active');
        
        // 根据active状态改变img的src
        if (menuButton.classList.contains('active')) {
            menuImg.src = '/assets/icon/menu-close.svg';
        } else {
            menuImg.src = '/assets/icon/menu.svg';
        }
    });
    
    // 监听窗口宽度变化，当菜单为active状态时取消
    window.addEventListener('resize', function() {
        var mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenu.classList.contains('active')) {
            mobileMenu.classList.remove('active');
        }
    });
</script>

        <section id="map-displays">
        
        <div id="map-shanghai" class="map-display active" data-city="shanghai" data-index="0" data-name="上海" data-name-en="SHANGHAI" data-bar-img="assets/cities/shanghai.svg">
            <div class="the-map" style="background-image: url(assets/images/map-thumbnail/shanghai.svg);"></div>
        </div>
        
        <div id="map-beijing" class="map-display " data-city="beijing" data-index="1" data-name="北京" data-name-en="BEIJING" data-bar-img="assets/cities/beijing.svg">
            <div class="the-map" style="background-image: url(assets/images/map-thumbnail/beijing.svg);"></div>
        </div>
        
        <div id="map-chongqing" class="map-display " data-city="chongqing" data-index="2" data-name="重庆" data-name-en="CHONGQING" data-bar-img="assets/cities/chongqing.svg">
            <div class="the-map" style="background-image: url(assets/images/map-thumbnail/chongqing.svg);"></div>
        </div>
        
        <div id="map-kinako" class="map-display " data-city="kinako" data-index="3" data-name="黄豆粉" data-name-en="KINAKO" data-bar-img="assets/cities/kinako.svg">
            <div class="the-map" style="background-image: url(assets/images/map-thumbnail/kinako.png);"></div>
        </div>
        
    </section>

    <section id="map-footer">
        <div id="map-info-footer" class="city">
            <div class="city-name">
                <span></span>
                <span></span>
            </div>
            <div class="city-bar">
                <img src="" alt="">
            </div>
        </div>
        <div id="page-indicator">
            <div id="left-arrow-button">
                <img src="assets/icon/arrow-right.svg" style="transform: rotateZ(180deg);" alt="">
            </div>
            
            <div class="page this-page" data-page="0"></div>
            
            <div class="page " data-page="1"></div>
            
            <div class="page " data-page="2"></div>
            
            <div class="page " data-page="3"></div>
            
            <div id="right-arrow-button">
                <img src="assets/icon/arrow-right.svg" alt="">
            </div>
        </div>
    </section>

    <div class="break"></div>

    <section id="main">
        <div id="news">
            <div class="sect-title sect-title-open">
                <h1>新闻</h1>
                <a href="/news">
                    <img src="assets/icon/open.svg" alt="| 打开">
                </a>
            </div>
            <div id="news-list">
                
                
                <a class="news-container no-a" href="/news/2026/02/10/update-plan.html">
                    <div id="post-title-row" class="fl-row fl-nw gap-6">
                    
                        <h2 class="news-title">线路图更新计划</h2>  
                    </div>
                    <p class="news-desc">看看我们未来会制作些什么。</p>
                    <div class="news-info">
                        <span class="news-date">2026/02/10</span>
                        <div class="news-type ai-center">
                            <div class="news-type-icon" style="background-color: #2462E8"></div>
                            <span class="lh-120">
                                公告
                                
                            </span>
                        </div>
                    </div>
                </a>
                
                <a class="news-container no-a" href="/news/2026/02/09/welcome.html">
                    <div id="post-title-row" class="fl-row fl-nw gap-6">
                    
                        <h2 class="news-title">欢迎来到 Chitose.City</h2>  
                    </div>
                    <p class="news-desc">浏览由千岁计划制作的城市交通线路图。</p>
                    <div class="news-info">
                        <span class="news-date">2026/02/09</span>
                        <div class="news-type ai-center">
                            <div class="news-type-icon" style="background-color: #2462E8"></div>
                            <span class="lh-120">
                                公告
                                
                            </span>
                        </div>
                    </div>
                </a>
                
            </div>
        </div>
        <div id="all-maps">
            <div class="sect-title">
                <h1>所有线路图</h1>
                <span class="g1">按照字母排序。</span>
            </div>
            <div id="maps-list" class="fl-row fl-w gap-24">
                
                
                
                    
                    
                        
                        
                        <div class="maps-section fl-col">
                            <h2 class="g1">B</h2>
                    
                    <a class="city no-a" href="maps/beijing">
                        <div class="city-name">
                            <span>北京</span>
                            <span>BEIJING</span>
                        </div>
                        <div class="city-bar">
                            <img src="assets/cities/beijing.svg" alt="北京">
                        </div>
                    </a>
                
                    
                    
                        
                            </div>
                        
                        
                        <div class="maps-section fl-col">
                            <h2 class="g1">C</h2>
                    
                    <a class="city no-a" href="maps/chongqing">
                        <div class="city-name">
                            <span>重庆</span>
                            <span>CHONGQING</span>
                        </div>
                        <div class="city-bar">
                            <img src="assets/cities/chongqing.svg" alt="重庆">
                        </div>
                    </a>
                
                    
                    
                        
                            </div>
                        
                        
                        <div class="maps-section fl-col">
                            <h2 class="g1">S</h2>
                    
                    <a class="city no-a" href="maps/shanghai">
                        <div class="city-name">
                            <span>上海</span>
                            <span>SHANGHAI</span>
                        </div>
                        <div class="city-bar">
                            <img src="assets/cities/shanghai.svg" alt="上海">
                        </div>
                    </a>
                
                    </div>
            </div>
        </div>
        <div class="fl-row fl-w gap-24 two-row">
            <div id="support-us" class="maps-section">
                <div class="sect-title">
                    <h1>支持我们</h1>
                    <span class="g1">感谢您的支持。</span>
                </div>
                <p class="sect-content">关注我们的 <a href="https://xhslink.com/m/80y7JhYWlgp">小红书</a> <br> 一些奇怪的都市交通周边产品 - <a href="https://m.tb.cn/h.7v8jZdKAVGekBu2">淘宝</a></p>            
            </div>
            <div id="contact" class="maps-section">
                <div class="sect-title">
                    <h1>联系</h1>
                    <span class="g1">建议、交流什么的都可以。</span>
                </div>           
                <p class="sect-content">通过社交媒体 -  <a href="https://xhslink.com/m/80y7JhYWlgp">小红书</a> <br> 电子邮件 - <a href="mailto:hello@chitose.city">hello@chitose.city</a></p>            
            </div>
        </div>
    </section>

    <script>
        // Slideshow functionality
        const mapDisplays = document.querySelectorAll('.map-display');
        const pageIndicator = document.querySelectorAll('#page-indicator .page');
        const leftArrowBtn = document.getElementById('left-arrow-button');
        const rightArrowBtn = document.getElementById('right-arrow-button');
        const mapInfoFooter = document.getElementById('map-info-footer');
        
        let currentIndex = 0;
        const totalPages = mapDisplays.length;
        let autoPlayTimer;

        function updateInfoFooter(index) {
            // 从 data 属性获取城市信息
            const currentDisplay = mapDisplays[index];
            const cityName = currentDisplay.dataset.name;
            const cityNameEn = currentDisplay.dataset.nameEn;
            const barImg = currentDisplay.dataset.barImg;
            
            const footerNameSpans = mapInfoFooter.querySelectorAll('.city-name span');
            const footerImg = mapInfoFooter.querySelector('.city-bar img');
            
            if (footerNameSpans[0]) {
                footerNameSpans[0].textContent = cityName;
            }
            if (footerNameSpans[1]) {
                footerNameSpans[1].textContent = cityNameEn;
            }
            if (footerImg) {
                footerImg.src = barImg;
                footerImg.alt = cityName;
            }
        }

        function showSlide(index, isManual = false) {
            if (index === currentIndex) return;

            // 根据是否手动触发，选择动画时长（手动为 0.5s，自动为 1s）
            const animationDuration = isManual ? 500 : 1000;
            const cssTransition = isManual ? '0.5s' : '1s';

            // 临时改变 CSS 过渡时长
            mapDisplays.forEach(slide => {
                slide.style.transition = `opacity ${cssTransition} ease-in-out`;
            });
            mapInfoFooter.style.transition = `opacity ${cssTransition} ease-in-out`;

            // fade out current slide and footer
            const prev = mapDisplays[currentIndex];
            prev.classList.remove('active');
            mapInfoFooter.style.opacity = '0';

            // after fade-out, activate next and fade in
            setTimeout(() => {
                // ensure no other slides marked active
                mapDisplays.forEach(s => s.classList.remove('active'));
                const next = mapDisplays[index];
                next.classList.add('active');

                // update page indicators
                pageIndicator.forEach((page, i) => {
                    page.classList.toggle('this-page', i === index);
                });

                // update footer content then fade in
                updateInfoFooter(index);
                setTimeout(() => { mapInfoFooter.style.opacity = '1'; }, 50);

                currentIndex = index;
                resetAutoPlay();
            }, animationDuration);
        }

        function nextSlide(isManual = false) {
            const newIndex = (currentIndex + 1) % totalPages;
            showSlide(newIndex, isManual);
        }

        function prevSlide(isManual = false) {
            const newIndex = (currentIndex - 1 + totalPages) % totalPages;
            showSlide(newIndex, isManual);
        }

        function resetAutoPlay() {
            clearInterval(autoPlayTimer);
            autoPlayTimer = setInterval(nextSlide, 10000);
        }

        function playButtonAnimation(button) {
            button.classList.add('click-animate');
            setTimeout(() => {
                button.classList.remove('click-animate');
            }, 300);
        }

        // Event listeners for arrow buttons
        leftArrowBtn.addEventListener('click', () => {
            playButtonAnimation(leftArrowBtn);
            prevSlide(true);
        });
        rightArrowBtn.addEventListener('click', () => {
            playButtonAnimation(rightArrowBtn);
            nextSlide(true);
        });

        // Event listeners for page indicator dots
        pageIndicator.forEach((page, index) => {
            page.addEventListener('click', () => showSlide(index, true));
        });

        // Event listeners for map displays
        mapDisplays.forEach((map) => {
            map.addEventListener('click', () => {
                const cityId = map.dataset.city;
                if (cityId !== 'kinako') {
                    window.location.href = `/maps/${cityId}/`;
                }
            });
        });

        // Initialize first slide
        updateInfoFooter(0);
        mapInfoFooter.style.transition = 'opacity 1s ease-in-out';
        mapInfoFooter.style.opacity = '1';

        // Start auto play
        resetAutoPlay();
    </script>
    <div id="slogan" class="fl-row fl-nw gap-12 jc-center two-row">
        <span>现代的城市交通线网图</span>
        <span>Modern Urban Transit Line Maps</span>
    </div>
    <footer>
    <img src="/assets/images/site_logo.svg" alt="Chitose.City">
    <span style="font-size: 12px;font-weight: 500;">©Project Chitose 2025</span>
</footer>
</body>